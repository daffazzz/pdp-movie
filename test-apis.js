// Test script to check for redirects to HTML pages\nconst { createClient } = require('@supabase/supabase-js');\n\n// Environment variables\nconst TMDB_API_KEY = 'f6d3ebb49663df38c7b2fad96e95a16b';\nconst TMDB_BASE_URL = 'https://api.themoviedb.org/3';\nconst SUPABASE_URL = 'https://dkhblpxugaxynqqiqdbn.supabase.co';\nconst SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRraGJscHh1Z2F4eW5xcWlxZGJuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0MTE3ODIsImV4cCI6MjA2MDk4Nzc4Mn0.XyJYSMikdcf1j0Z7I-Ea1DDB_zmRpT8jYCmKo-LYA9k';\n\nconst supabase = createClient(SUPABASE_URL, SUPABASE_KEY);\n\nasync function testAPIs() {\n  console.log('Testing various API endpoints for redirects to HTML pages...\\n');\n  \n  // Test TMDB endpoints\n  const tmdbEndpoints = [\n    `${TMDB_BASE_URL}/configuration?api_key=${TMDB_API_KEY}`,\n    `${TMDB_BASE_URL}/genre/movie/list?api_key=${TMDB_API_KEY}`,\n    `${TMDB_BASE_URL}/trending/movie/day?api_key=${TMDB_API_KEY}`,\n    `${TMDB_BASE_URL}/trending/tv/day?api_key=${TMDB_API_KEY}`,\n    `${TMDB_BASE_URL}/search/movie?api_key=${TMDB_API_KEY}&query=avengers`,\n    `${TMDB_BASE_URL}/search/tv?api_key=${TMDB_API_KEY}&query=game%20of%20thrones`\n  ];\n  \n  for (const url of tmdbEndpoints) {\n    console.log(`Testing TMDB URL: ${url}`);\n    try {\n      const response = await fetch(url);\n      const contentType = response.headers.get('content-type');\n      \n      console.log(`  Status: ${response.status}`);\n      console.log(`  Content-Type: ${contentType}`);\n      \n      if (contentType && contentType.includes('text/html')) {\n        console.log(`  ❌ ERROR: This endpoint returned HTML instead of JSON!`);\n        const text = await response.text();\n        console.log(`  First 200 chars of HTML: ${text.substring(0, 200)}`);\n      } else if (!contentType || !contentType.includes('application/json')) {\n        console.log(`  ⚠️  WARNING: Content-Type is not JSON: ${contentType}`);\n        if (response.status !== 200) {\n          const text = await response.text();\n          console.log(`  Response content: ${text.substring(0, 200)}`);\n        }\n      } else {\n        console.log(`  ✅ OK: JSON response received`);\n      }\n    } catch (error) {\n      console.log(`  ❌ ERROR: ${error.message}`);\n    }\n    console.log('');\n  }\n  \n  // Test Supabase endpoints\n  console.log('Testing Supabase endpoints...\\n');\n  \n  try {\n    console.log('Testing Supabase movies table access...');\n    const { data, error } = await supabase\n      .from('movies')\n      .select('*')\n      .limit(1);\n      \n    if (error) {\n      console.log(`  ❌ ERROR: ${error.message}`);\n    } else {\n      console.log(`  ✅ OK: Successfully accessed movies table`);\n    }\n  } catch (error) {\n    console.log(`  ❌ ERROR: ${error.message}`);\n  }\n  \n  try {\n    console.log('Testing Supabase series table access...');\n    const { data, error } = await supabase\n      .from('series')\n      .select('*')\n      .limit(1);\n      \n    if (error) {\n      console.log(`  ❌ ERROR: ${error.message}`);\n    } else {\n      console.log(`  ✅ OK: Successfully accessed series table`);\n    }\n  } catch (error) {\n    console.log(`  ❌ ERROR: ${error.message}`);\n  }\n}\n\ntestAPIs();